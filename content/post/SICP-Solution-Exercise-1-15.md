---
title: "SICP - Solution: Exercise 1.15"
date: 2018-10-05T21:06:58+02:00
draft: false
---

**Exercise 1.15:** The sine of an angle (specified in radians) can be computed by making use of the approximation ${\sin x\approx x}$ if $x$ is sufficiently small, and the trigonometric identity

$$\sin\;x\;=\;3\;\sin\frac x3-4\;\sin^3\frac x3$$

to reduce the size of the argument of sin. (For purposes of this exercise an angle is considered “sufficiently small” if its magnitude is not greater than 0.1 radians.) These ideas are incorporated in the following procedures:

```scheme
(define (cube x) (* x x x))
(define (p x) (- (* 3 x) (* 4 (cube x))))
(define (sine angle)
   (if (not (> (abs angle) 0.1))
       angle
       (p (sine (/ angle 3.0)))))
```

1. How many times is the procedure `p` applied when `(sine 12.15)` is evaluated?
2. What is the order of growth in space and number of steps (as a function of `a`) used by the process generated by the sine procedure when `(sine a)` is evaluated?

**Solution**

```scheme
(define (cube x) (* x x x))

(define (p x) (- (* 3 x) (* 4 (cube x))))

(define (sine angle step)
  (display step) (display ": ") (display angle) (newline)
   (if (not (> (abs angle) 0.1))
       angle
       (p (sine (/ angle 3.0) (+ step 1)))))

(display (sine 12.15 1))
```

```
1: 12.15
2: 4.05
3: 1.3499999999999999
4: 0.44999999999999996
5: 0.15
6: 0.049999999999999996
-0.39980345741334
```

```scheme
(define (sine-count-step angle step)
  (if (not (> (abs angle) 0.1))
      step
      (sine-count-step (/ angle 3.0) (+ step 1))))

(display "| ") (display "a         ") (display " | ") (display "number of steps              ") (display " |") (newline)
(display "| ") (display "----------") (display " | ") (display "-----------------------------") (display " |") (newline)
(display "| ") (display       12.15 ) (display " | ") (display (sine-count-step       12.15 1)) (display " |") (newline)
(display "| ") (display      120.15 ) (display " | ") (display (sine-count-step      120.15 1)) (display " |") (newline)
(display "| ") (display     1200.15 ) (display " | ") (display (sine-count-step     1200.15 1)) (display " |") (newline)
(display "| ") (display    12000.15 ) (display " | ") (display (sine-count-step    12000.15 1)) (display " |") (newline)
(display "| ") (display   120000.15 ) (display " | ") (display (sine-count-step   120000.15 1)) (display " |") (newline)
(display "| ") (display  1200000.15 ) (display " | ") (display (sine-count-step  1200000.15 1)) (display " |") (newline)
(display "| ") (display 12000000.15 ) (display " | ") (display (sine-count-step 12000000.15 1)) (display " |") (newline)
```

| a           | number of steps |
| ----------- | --------------- |
| 12.15       | 6               |
| 120.15      | 8               |
| 1200.15     | 10              |
| 12000.15    | 12              |
| 120000.15   | 14              |
| 1200000.15  | 16              |
| 12000000.15 | 18              |

for every iteration, `a` is divided by 3. So the iteration will stop when:

$$\frac a{3^n}<0.1$$

Which can be rewritten to take out the n as:

$$\frac a{0.1}<3^n$$

$$\log\left(\frac{\displaystyle a}{\displaystyle0.1}\right)<\log\left(3^n\right)$$

$$\log(a)-\log(0.1)<n.\log\left(3\right)$$

$$\frac{\log(a)-\log(0.1)}{\log\left(3\right)}<n$$

Which means that the iteration are ${\mathrm\Theta(\log(a))}$